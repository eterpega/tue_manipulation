<launch>

  <!-- convert tilt laser scan to pointcloud -->
  <node pkg="laser_filters" type="scan_to_cloud_filter_chain" output="screen" name="scan_to_cloud_filter_chain_tilt_laser">
    <remap from="scan" to="top_scan"/>
    <remap from="cloud_filtered" to="top_scan_cloud"/>
    <param name="target_frame" type="string" value="/base_link"/>
    <rosparam command="load" file="$(find amigo_arm_navigation)/config/shadow_filter.yaml" />
  </node>

  <!-- need to clear known objects from scans -->
  <node pkg="planning_environment" type="clear_known_objects" name="laser_clear_objects" output="screen">
    <remap from="cloud_in" to="top_scan_cloud" />
    <remap from="cloud_out" to="top_scan_cloud_known" />
    <param name="sensor_frame" type="string" value="/top_laser" />    
    <param name="fixed_frame" type="string" value="/base_link" />
    <param name="object_padd" type="double" value="0.02" />
    <param name="object_scale" type="double" value="1.0" />
    

  </node>


  <!--self filtering-->
  <node pkg="robot_self_filter" type="self_filter" respawn="true" name="tilt_laser_self_filter" output="screen">

     <!-- The topic for the input cloud -->
     <remap from="cloud_in" to="top_scan_cloud_known" />
     

     <!-- The topic for the output cloud -->
     <remap from="cloud_out" to="top_scan_cloud_filtered" />

     <!-- The frame of the sensor used to obtain the data to be
       filtered; This parameter is optional. If it is not specified,
       shadow points will be considered outside -->
     <param name="sensor_frame" type="string" value="/top_laser" />

     <param name="min_sensor_dist" type="double" value=".5"/>
     <param name="self_see_default_padding" type="double" value=".05"/>
     <param name="self_see_default_scale" type="double" value="1.0"/>

     <!-- specifies links to self filter -->
     <rosparam command="load" file="$(find amigo_arm_navigation)/config/self_filter.yaml" />

   </node>


</launch>

